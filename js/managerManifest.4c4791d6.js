"use strict";(self["webpackChunkcommand_manager"]=self["webpackChunkcommand_manager"]||[]).push([[395],{7877:function(e,l,a){var t=a(6573);l.Z={export(e){return(0,t.a)("export","post",e)},open(e){return(0,t.a)("open","post",e)},exec(e){return(0,t.a)("exec","post",e)},stop(e){return(0,t.a)("stop","post",e)}}},6573:function(e,l,a){a.d(l,{S:function(){return o},a:function(){return _}});a(6229),a(7330),a(2062);var t={baseUrl:"http://localhost:27001/"};const _=(e,l,a)=>new Promise(((_,o)=>{fetch(`${t.baseUrl}${e}`,{method:l,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{200===e.code&&_(e)})).catch(o)})),o=e=>{const l=document.createElement("a");l.href=URL.createObjectURL(new Blob([e])),l.download="manifest.json",l.click()}},1791:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{BG:function(){return handleExportBefore},ET:function(){return handleImport},IF:function(){return manifest},hM:function(){return handleImportBefore}});var vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4870),_vueuse_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6367),element_plus__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6e3),element_plus__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7178),_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7877),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6573);const state=(0,vue__WEBPACK_IMPORTED_MODULE_2__.qj)({import:!1,export:!1}),manifest=(0,_vueuse_core__WEBPACK_IMPORTED_MODULE_3__.y$C)("manifest",{},localStorage,{mergeDefaults:!0}),handleImportBefore=e=>{state.import||(element_plus__WEBPACK_IMPORTED_MODULE_4__.T.confirm("导入配置后, 将会覆盖当前配置, 是否确认?",{title:"确认导入配置",type:"warning"}).then((()=>{state.import=!0,e.target.click()})).catch(console.log),e.stopPropagation())},handleImport=async file=>{try{const data=await file.text();manifest.value=eval("("+data+")")}catch(err){console.warn(err)}return!1},handleExportBefore=e=>{state.export?handleExport():manifest.value.path&&element_plus__WEBPACK_IMPORTED_MODULE_4__.T.confirm(`是否要导出配置到 ${manifest.value.path}`,{title:"确认导出配置",type:"warning"}).then((()=>{state.export=!0,handleExport()})).catch(console.log)},handleExport=()=>{_api__WEBPACK_IMPORTED_MODULE_0__.Z.export(manifest.value).then((()=>{element_plus__WEBPACK_IMPORTED_MODULE_5__.z8.success("导出成功")})).catch((()=>{(0,_utils__WEBPACK_IMPORTED_MODULE_1__.S)(JSON.stringify(manifest.value,null,2))}))},handleOutput=()=>{console.log(manifest.value)}},4211:function(e,l,a){a.r(l),a.d(l,{default:function(){return f}});var t=a(3396),_=a(4870),o=a(7178),n=a(6e3),u=a(1791);const r=e=>((0,t.dD)("data-v-4240b540"),e=e(),(0,t.Cn)(),e),p=r((()=>(0,t._)("span",{style:{"padding-right":"50px"}},null,-1))),i=r((()=>(0,t._)("span",{class:"text--white"}," 导入配置 ",-1))),c={class:"dialog-footer"};var s={__name:"manifest",setup(e){const l=(0,_.iH)("String"),a=(0,_.iH)(["String","Number","Boolean"]),r=(0,_.iH)(""),s=(0,_.iH)(""),d=(0,_.iH)(!1),m=(0,_.qj)({}),f=(0,_.qj)({}),w=(0,_.qj)({}),h=()=>{d.value=!0},E=()=>{["commands"].includes(r.value)?o.z8.error(`不能添加属性${r.value}`):r.value?(m[r.value]={Boolean:Boolean,String:String,Number:Number}[l.value](s.value),r.value=s.value="",d.value=!1,o.z8.success("添加成功")):o.z8.error("不能添加空属性")},v=()=>{u.IF.value=Object.assign({},u.IF.value,f)},b=e=>{"path"!==e.prop?n.T.confirm(`是否删除属性${e.prop}`).then((()=>{delete w[e.prop],delete m[e.prop]})).catch(console.log):o.z8.error("不能删除path属性")};return(0,t.YP)((()=>[u.IF.value,r.value]),(()=>{const e=Object.assign({},m,u.IF.value);Object.keys(e).forEach((l=>{if(!(e[l]instanceof Object)){const a=e[l];f[l]=a,w[l]={prop:l,value:a,type:typeof a}}})),e.path=e.path||""}),{immediate:!0}),(e,o)=>{const n=(0,t.up)("Minus"),m=(0,t.up)("el-icon"),k=(0,t.up)("el-button"),W=(0,t.up)("el-input"),g=(0,t.up)("el-form-item"),O=(0,t.up)("el-upload"),U=(0,t.up)("el-form"),D=(0,t.up)("el-main"),M=(0,t.up)("el-aside"),P=(0,t.up)("el-option"),C=(0,t.up)("el-select"),x=(0,t.up)("el-dialog"),y=(0,t.up)("el-container");return(0,t.wg)(),(0,t.j4)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(D,{style:{"--el-main-padding":"0px 20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{model:f,"label-width":"120px"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(w,(e=>((0,t.wg)(),(0,t.j4)(g,{key:e.prop,label:e.prop},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:f[e.prop],"onUpdate:modelValue":l=>f[e.prop]=l},{append:(0,t.w5)((()=>[(0,t.Wm)(k,{onClick:l=>b(e),icon:""},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128)),(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,{type:"success",onClick:h},{default:(0,t.w5)((()=>[(0,t.Uk)("新增配置")])),_:1}),(0,t.Wm)(k,{type:"primary",onClick:v},{default:(0,t.w5)((()=>[(0,t.Uk)("暂存配置")])),_:1}),p,(0,t.Wm)(O,{class:"el-button el-button--text","before-upload":(0,_.SU)(u.ET),"show-file-list":!1},{trigger:(0,t.w5)((()=>[(0,t.Wm)(k,{type:"warning",onClick:(0,_.SU)(u.hM)},{default:(0,t.w5)((()=>[i])),_:1},8,["onClick"])])),_:1},8,["before-upload"]),(0,t.Wm)(k,{type:"danger",onClick:(0,_.SU)(u.BG)},{default:(0,t.w5)((()=>[(0,t.Uk)("导出配置")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,t.Wm)(M,{width:"300px"}),(0,t.Wm)(x,{width:"450px",modelValue:d.value,"onUpdate:modelValue":o[4]||(o[4]=e=>d.value=e)},{header:(0,t.w5)((()=>[(0,t.Uk)("新增配置")])),footer:(0,t.w5)((()=>[(0,t._)("span",c,[(0,t.Wm)(k,{onClick:o[3]||(o[3]=e=>d.value=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取 消")])),_:1}),(0,t.Wm)(k,{type:"primary",onClick:E},{default:(0,t.w5)((()=>[(0,t.Uk)("确 定")])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(U,{model:w},{default:(0,t.w5)((()=>[(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{placeholder:"属性名",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{placeholder:"属性值",modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,{placeholder:"类型",modelValue:l.value,"onUpdate:modelValue":o[2]||(o[2]=e=>l.value=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.value,(e=>((0,t.wg)(),(0,t.j4)(P,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])),_:1})}}},d=a(89);const m=(0,d.Z)(s,[["__scopeId","data-v-4240b540"]]);var f=m}}]);
//# sourceMappingURL=managerManifest.4c4791d6.js.map