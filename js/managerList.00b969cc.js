"use strict";(self["webpackChunkcommand_manager"]=self["webpackChunkcommand_manager"]||[]).push([[453],{7877:function(e,t,_){var a=_(6573);t.Z={export(e){return(0,a.a)("export","post",e)},open(e){return(0,a.a)("open","post",e)},exec(e){return(0,a.a)("exec","post",e)},stop(e){return(0,a.a)("stop","post",e)}}},6573:function(e,t,_){_.d(t,{S:function(){return l},a:function(){return n}});_(6229),_(7330),_(2062);var a={baseUrl:"http://localhost:27001/"};const n=(e,t,_)=>new Promise(((n,l)=>{fetch(`${a.baseUrl}${e}`,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}).then((e=>e.json())).then((e=>{200===e.code&&n(e)})).catch(l)})),l=e=>{const t=document.createElement("a");t.href=URL.createObjectURL(new Blob([e])),t.download="manifest.json",t.click()}},1791:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{BG:function(){return handleExportBefore},ET:function(){return handleImport},IF:function(){return manifest},hM:function(){return handleImportBefore}});var vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4870),_vueuse_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6367),element_plus__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6e3),element_plus__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7178),_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7877),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6573);const state=(0,vue__WEBPACK_IMPORTED_MODULE_2__.qj)({import:!1,export:!1}),manifest=(0,_vueuse_core__WEBPACK_IMPORTED_MODULE_3__.y$C)("manifest",{},localStorage,{mergeDefaults:!0}),handleImportBefore=e=>{state.import||(element_plus__WEBPACK_IMPORTED_MODULE_4__.T.confirm("导入配置后, 将会覆盖当前配置, 是否确认?",{title:"确认导入配置",type:"warning"}).then((()=>{state.import=!0,e.target.click()})).catch(console.log),e.stopPropagation())},handleImport=async file=>{try{const data=await file.text();manifest.value=eval("("+data+")")}catch(err){console.warn(err)}return!1},handleExportBefore=e=>{state.export?handleExport():manifest.value.path&&element_plus__WEBPACK_IMPORTED_MODULE_4__.T.confirm(`是否要导出配置到 ${manifest.value.path}`,{title:"确认导出配置",type:"warning"}).then((()=>{state.export=!0,handleExport()})).catch(console.log)},handleExport=()=>{_api__WEBPACK_IMPORTED_MODULE_0__.Z.export(manifest.value).then((()=>{element_plus__WEBPACK_IMPORTED_MODULE_5__.z8.success("导出成功")})).catch((()=>{(0,_utils__WEBPACK_IMPORTED_MODULE_1__.S)(JSON.stringify(manifest.value,null,2))}))},handleOutput=()=>{console.log(manifest.value)}},897:function(e,t,_){_.r(t),_.d(t,{default:function(){return u}});_(7658);var a=_(3396),n=_(4870),l=_(7877),o=_(1791),r=_(2436),i=_(6e3),c={__name:"list",setup(e){const t=(e,t)=>{r.Z.push({name:e,query:{uuid:t.uuid}})},_=e=>{l.Z.open(e)},c=e=>{l.Z.exec(e)},p=e=>{l.Z.stop(e)},s=(e,t)=>{i.T.confirm(`是否删除 ${e.name} 命令？`,{title:"删除确认",type:"warning"}).then((()=>{u.value.splice(t)})).catch(console.log)},u=(0,n.iH)(o.IF.value.commands);return(e,n)=>{const l=(0,a.up)("el-table-column"),o=(0,a.up)("el-button"),r=(0,a.up)("el-table");return(0,a.wg)(),(0,a.j4)(r,{data:u.value,onDblclick:n[0]||(n[0]=e=>t("managerEdit",e))},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{type:"index",label:"序号",width:"60"}),(0,a.Wm)(l,{prop:"name",label:"名称",width:"120"}),(0,a.Wm)(l,{prop:"port",label:"端口",width:"120"}),(0,a.Wm)(l,{prop:"nodeVersion",label:"node版本",width:"90"}),(0,a.Wm)(l,{prop:"terminal",label:"终端",width:"64"}),(0,a.Wm)(l,{prop:"path",label:"脚本路径"}),(0,a.Wm)(l,{prop:"keywords",label:"关键词"}),(0,a.Wm)(l,{prop:"desc",label:"备注"}),(0,a.Wm)(l,{prop:"handle",label:"操作",width:"400"},{default:(0,a.w5)((({row:e,$index:n})=>[(0,a.Wm)(o,{size:"small",onClick:t=>_(e)},{default:(0,a.w5)((()=>[(0,a.Uk)("打开路径")])),_:2},1032,["onClick"]),(0,a.Wm)(o,{type:"danger",size:"small",onClick:t=>c(e)},{default:(0,a.w5)((()=>[(0,a.Uk)("执行")])),_:2},1032,["onClick"]),(0,a.Wm)(o,{type:"info",size:"small",onClick:t=>p(e)},{default:(0,a.w5)((()=>[(0,a.Uk)("停止")])),_:2},1032,["onClick"]),(0,a.Wm)(o,{type:"success",size:"small",onClick:_=>t("managerEdit",e)},{default:(0,a.w5)((()=>[(0,a.Uk)("修改")])),_:2},1032,["onClick"]),(0,a.Wm)(o,{type:"primary",size:"small",onClick:_=>t("managerCopy",e)},{default:(0,a.w5)((()=>[(0,a.Uk)("复制")])),_:2},1032,["onClick"]),(0,a.Wm)(o,{type:"warning",size:"small",onClick:t=>s(e,n)},{default:(0,a.w5)((()=>[(0,a.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])}}},p=_(89);const s=(0,p.Z)(c,[["__scopeId","data-v-18731c24"]]);var u=s}}]);
//# sourceMappingURL=managerList.00b969cc.js.map