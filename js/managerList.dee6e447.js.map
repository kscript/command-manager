{"version":3,"file":"js/managerList.dee6e447.js","mappings":"2IACA,KACEA,OAAQC,GACN,OAAOC,EAAAA,EAAAA,GAAS,SAAU,OAAQD,EACpC,EACAE,IAAAA,CAAMF,GACJ,OAAOC,EAAAA,EAAAA,GAAS,OAAQ,OAAQD,EAClC,E,0GCPF,GACEG,QAAS,2BCCJ,MAAMF,EAAWA,CAACG,EAAKC,EAAQL,IAC7B,IAAIM,SAAQ,CAACC,EAASC,KAC3BC,MAAO,GAAEC,EAAOP,UAAUC,IAAO,CAC/BC,SACAM,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUd,KAEpBe,MAAMC,GAAQA,EAAIC,SAClBF,MAAMC,IACY,MAAbA,EAAIE,MACNX,EAAQS,EACV,IAEDG,MAAMX,EAAO,IAIPY,EAAgBC,IAC3B,MAAMC,EAAOC,SAASC,cAAc,KACpCF,EAAKG,KAAOC,IAAIC,gBAAgB,IAAIC,KAAK,CAACP,KAC1CC,EAAKO,SAAW,gBAChBP,EAAKQ,OAAO,C,spBClBd,MAAMC,OAAQC,EAAAA,iCAAAA,IAAS,CACrBC,QAAQ,EACRlC,QAAQ,IAGGmC,UAAWC,EAAAA,0CAAAA,KACtB,WACA,CAAC,EACDC,aACA,CAAEC,eAAe,IAGNC,mBAAsBC,IAC5BR,MAAME,SACTO,0CAAAA,EAAaC,QAAQ,yBAA0B,CAC7CC,MAAO,SACPC,KAAM,YACL5B,MAAK,KACNgB,MAAME,QAAS,EACfM,EAAMK,OAAOd,OAAO,IACnBX,MAAM0B,QAAQC,KACjBP,EAAMQ,kBACR,EAEWC,aAAeC,aAC1B,IACE,MAAMjD,WAAakD,KAAKC,OAExBjB,SAASkB,MAAQC,KAAK,IAAMrD,KAAO,IACrC,CAAE,MAAOsD,KACPT,QAAQU,KAAKD,IACf,CACA,OAAO,CAAK,EAGDE,mBAAsBjB,IAC5BR,MAAMhC,OAST0D,eARAvB,SAASkB,MAAMM,MAAQlB,0CAAAA,EAAaC,QAAS,YAAWP,SAASkB,MAAMM,OAAQ,CAC7EhB,MAAO,SACPC,KAAM,YACL5B,MAAK,KACNgB,MAAMhC,QAAS,EACf0D,cAAc,IACbtC,MAAM0B,QAAQC,IAGnB,EAEWW,aAAeA,KAC1BE,kCAAAA,EAAI5D,OAAOmC,SAASkB,OAAOrC,MAAK,KAC9B6C,0CAAAA,GAAUC,QAAQ,OAAO,IAExB1C,OAAM,MACLC,EAAAA,oCAAAA,GAAaP,KAAKC,UAAUoB,SAASkB,MAAO,KAAM,GAAG,GACrD,EAGOU,aAAeA,KAC1BjB,QAAQC,IAAIZ,SAASkB,MAAM,C,4JCxC7B,MAAMW,EAAYA,CAACpB,EAAMqB,KACvBC,EAAAA,EAAOC,KAAK,CACVC,KAAMxB,EACNyB,MAAO,CACLC,KAAML,EAAIK,OAEZ,EAEEC,EAAcN,IAClBL,EAAAA,EAAIzD,KAAK8D,EAAI,EAETO,GAAYC,EAAAA,EAAAA,IAAItC,EAAAA,GAASkB,MAAMqB,U,4kCC9BrC,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://command-manager/./src/api/index.js","webpack://command-manager/./src/config/index.js","webpack://command-manager/./src/utils/index.js","webpack://command-manager/./src/views/manager/common.js","webpack://command-manager/./src/views/manager/list.vue","webpack://command-manager/./src/views/manager/list.vue?7611"],"sourcesContent":["import { fetchApi } from '@/utils'\r\nexport default {\r\n  export (data) {\r\n    return fetchApi('export', 'post', data)\r\n  },\r\n  open (data) {\r\n    return fetchApi('open', 'post', data)\r\n  }\r\n}\r\n","export default {\r\n  baseUrl: 'http://localhost:27001/'\r\n}\r\n","import config from '@/config'\r\n\r\nexport const fetchApi = (url, method, data) => {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${config.baseUrl}${url}`, {\r\n      method,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        if (res.code === 200) {\r\n          resolve(res)\r\n        }\r\n      })\r\n      .catch(reject)\r\n  })\r\n}\r\n\r\nexport const downloadFile = (content) => {\r\n  const link = document.createElement('a')\r\n  link.href = URL.createObjectURL(new Blob([content]))\r\n  link.download = 'manifest.json'\r\n  link.click()\r\n}\r\n","import { reactive } from 'vue'\r\nimport { useStorage } from '@vueuse/core'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\n\r\nimport api from '@/api'\r\nimport { downloadFile } from '@/utils'\r\n\r\nconst state = reactive({\r\n  import: false,\r\n  export: false\r\n})\r\n\r\nexport const manifest = useStorage(\r\n  'manifest',\r\n  {},\r\n  localStorage,\r\n  { mergeDefaults: true }\r\n)\r\n\r\nexport const handleImportBefore = (event) => {\r\n  if (!state.import) {\r\n    ElMessageBox.confirm('导入配置后, 将会覆盖当前配置, 是否确认?', {\r\n      title: '确认导入配置',\r\n      type: 'warning'\r\n    }).then(() => {\r\n      state.import = true\r\n      event.target.click()\r\n    }).catch(console.log)\r\n    event.stopPropagation()\r\n  }\r\n}\r\nexport const handleImport = async (file) => {\r\n  try {\r\n    const data = await file.text()\r\n    // eslint-disable-next-line\r\n    manifest.value = eval('(' + data + ')')\r\n  } catch (err) {\r\n    console.warn(err)\r\n  }\r\n  return false\r\n}\r\n\r\nexport const handleExportBefore = (event) => {\r\n  if (!state.export) {\r\n    manifest.value.path && ElMessageBox.confirm(`是否要导出配置到 ${manifest.value.path}`, {\r\n      title: '确认导出配置',\r\n      type: 'warning'\r\n    }).then(() => {\r\n      state.export = true\r\n      handleExport()\r\n    }).catch(console.log)\r\n  } else {\r\n    handleExport()\r\n  }\r\n}\r\nexport const handleExport = () => {\r\n  api.export(manifest.value).then(() => {\r\n    ElMessage.success('导出成功')\r\n  })\r\n    .catch(() => {\r\n      downloadFile(JSON.stringify(manifest.value, null, 2))\r\n    })\r\n}\r\n\r\nexport const handleOutput = () => {\r\n  console.log(manifest.value)\r\n}\r\n","<template>\r\n  <el-table :data=\"tableData\" @dblclick=\"row => handleRow('managerEdit', row)\">\r\n    <el-table-column type=\"index\" label=\"序号\" width=\"60\" />\r\n    <el-table-column prop=\"name\" label=\"名称\" width=\"120\" />\r\n    <el-table-column prop=\"port\" label=\"端口\" width=\"120\" />\r\n    <el-table-column prop=\"nodeVersion\" label=\"node版本\" width=\"90\" />\r\n    <el-table-column prop=\"terminal\" label=\"终端\" width=\"64\" />\r\n    <el-table-column prop=\"path\" label=\"脚本路径\" />\r\n    <el-table-column prop=\"keywords\" label=\"关键词\" />\r\n    <el-table-column prop=\"desc\" label=\"备注\" />\r\n    <el-table-column prop=\"handle\" label=\"操作\" width=\"240\">\r\n      <template #default=\"{ row }\">\r\n        <el-button type=\"info\" size=\"small\" @click=\"handleOpen(row)\">打开路径</el-button>\r\n        <el-button type=\"warning\" size=\"small\" @click=\"handleRow('managerEdit', row)\">修改</el-button>\r\n        <el-button type=\"primary\" size=\"small\" @click=\"handleRow('managerCopy', row)\">复制</el-button>\r\n      </template>\r\n    </el-table-column>\r\n  </el-table>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport api from '@/api'\r\nimport { manifest } from './common'\r\nimport router from '@/router'\r\nconst handleRow = (type, row) => {\r\n  router.push({\r\n    name: type,\r\n    query: {\r\n      uuid: row.uuid\r\n    }\r\n  })\r\n}\r\nconst handleOpen = (row) => {\r\n  api.open(row)\r\n}\r\nconst tableData = ref(manifest.value.commands)\r\n</script>\r\n<style scoped>\r\n.el-space {\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n","import script from \"./list.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./list.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./list.vue?vue&type=style&index=0&id=b365ad68&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b365ad68\"]])\n\nexport default __exports__"],"names":["export","data","fetchApi","open","baseUrl","url","method","Promise","resolve","reject","fetch","config","headers","body","JSON","stringify","then","res","json","code","catch","downloadFile","content","link","document","createElement","href","URL","createObjectURL","Blob","download","click","state","reactive","import","manifest","useStorage","localStorage","mergeDefaults","handleImportBefore","event","ElMessageBox","confirm","title","type","target","console","log","stopPropagation","handleImport","async","file","text","value","eval","err","warn","handleExportBefore","handleExport","path","api","ElMessage","success","handleOutput","handleRow","row","router","push","name","query","uuid","handleOpen","tableData","ref","commands","__exports__"],"sourceRoot":""}